<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Integration | BDN Pay</title>
    
    <script type="module" src="https://likezelwit.github.io/Bank-Devisa-Nusantara/bdn-gateway.js"></script>
    
    <style>
        body { 
            display: flex; justify-content: center; align-items: center; 
            height: 100vh; margin: 0; background-color: #f1f5f9;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        .checkout-card {
            text-align: center; background: white; padding: 3rem; 
            border-radius: 20px; box-shadow: 0 10px 25px rgba(0,0,0,0.1);
            max-width: 400px; width: 100%;
        }
        .price-tag { font-size: 1.5rem; color: #1e293b; margin: 1rem 0; font-weight: 800; }
        .item-name { color: #64748b; margin-bottom: 2rem; }
        #checkoutBtn {
            padding: 12px 24px; cursor: pointer; background: #b8924e; 
            color: white; border: none; border-radius: 12px; 
            font-weight: 700; font-size: 1rem; transition: 0.3s; width: 100%;
        }
        #checkoutBtn:hover { background: #a37f3d; transform: translateY(-2px); }
        #checkoutBtn:active { transform: translateY(0); }
    </style>
</head>
<body>

    <div class="checkout-card">
        <div style="font-size: 3rem; margin-bottom: 1rem;">☕</div>
        <h2 style="margin:0;">BDN Checkout Test</h2>
        <p class="item-name">Kopi Gayo Premium (250g)</p>
        <div class="price-tag">Rp 50.000</div>
        
        <button id="checkoutBtn">Bayar Sekarang</button>
        
        <p style="font-size: 0.75rem; color: #94a3b8; margin-top: 1.5rem;">
            Powered by Bank Devisa Nusantara Integration
        </p>
    </div>

    

    <script>
        /**
         * STEP 1: INISIALISASI
         * Ganti 'PASTE_API_KEY_LO_DISINI' dengan API Key 
         * yang lo dapet dari Developer Console tadi.
         */
        document.addEventListener('DOMContentLoaded', () => {
            // Contoh format: BDNPay.init("BDN_LIVE_XXXXXXXXXXXX");
            if (typeof BDNPay !== 'undefined') {
                BDNPay.init("PASTE_API_KEY_LO_DISINI"); 
            }
        });

        document.getElementById('checkoutBtn').onclick = async () => {
            const btn = document.getElementById('checkoutBtn');
            
            try {
                btn.innerText = "Processing...";
                btn.disabled = true;

                // STEP 2: TRIGGER PAYMENT MODAL
                const res = await BDNPay.openPayment({
                    amount: 50000,
                    itemName: "Kopi Gayo Premium"
                });

                // STEP 3: HANDLE RESPONSE
                if(res.status === "success") {
                    console.log("Success Details:", res);
                    alert("✅ PEMBAYARAN BERHASIL!\n\nID Transaksi: " + res.trxId + "\nStatus: " + res.status);
                } else {
                    alert("❌ Pembayaran Gagal atau Dibatalkan.");
                }

            } catch (err) {
                console.error("Critical Error:", err);
                alert("Sistem Error: Cek console browser atau pastikan API Key sudah benar.");
            } finally {
                btn.innerText = "Bayar Sekarang";
                btn.disabled = false;
            }
        };
    </script>
</body>
</html>
